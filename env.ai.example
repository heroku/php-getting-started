# Pixelcoda Search - AI-Enhanced Configuration
# Copy to .env and configure for your environment

# =============================================================================
# CORE API CONFIGURATION
# =============================================================================

NODE_ENV=development
PORT=8787
DATABASE_URL=postgresql://user:password@localhost:5432/pixelcoda_search

# =============================================================================
# SEARCH ENGINE CONFIGURATION
# =============================================================================

# MeiliSearch
MEILI_URL=http://localhost:7700
MEILI_KEY=your_meili_master_key_here

# Hybrid Search (BM25 + Vector ANN + RRF)
ENABLE_VECTOR_SEARCH=true
HYBRID_ALPHA=0.5                    # Balance between BM25 and Vector
RRF_K=60                           # Reciprocal Rank Fusion parameter
HYBRID_MAX_CANDIDATES=50
ENABLE_RERANKING=true              # Cross-Encoder Re-ranking

# =============================================================================
# LLM PROVIDER (Privacy-First Options)
# =============================================================================

# Option 1: OpenAI (Cloud)
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Option 2: Azure OpenAI (Enterprise)
# AZURE_OPENAI_API_KEY=your-azure-key-here
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4

# Option 3: Ollama (Local/On-Premise - DSGVO Compliant)
# OLLAMA_BASE_URL=http://localhost:11434
# OLLAMA_MODEL=llama3.1
# OLLAMA_EMBEDDING_MODEL=nomic-embed-text

# =============================================================================
# PRIVACY & DSGVO COMPLIANCE
# =============================================================================

# PII Protection
ENABLE_PII_REDACTION=true          # Redact emails, phone numbers, etc.
ENABLE_AUDIT_LOGGING=true          # Log all LLM requests for compliance

# CORS & Security
CORS_ALLOWLIST=https://your-typo3-site.com,https://admin.your-site.com
RATE_LIMIT_MAX_REQUESTS=100
WEBHOOK_SECRET=your-secure-webhook-secret

# =============================================================================
# TYPO3 INTEGRATION
# =============================================================================

TYPO3_PROJECT_ID=typo3-main
TYPO3_WEBHOOK_SECRET=your-typo3-webhook-secret
TYPO3_COLLECTIONS=pages,news,content

# =============================================================================
# TELEMETRY & ADMIN FEATURES
# =============================================================================

ENABLE_METRICS=true
ENABLE_AB_TESTING=true
METRICS_RETENTION_DAYS=90
